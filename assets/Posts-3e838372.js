import{_ as Z,S as D,I as q,e as ee,k as h,l as a,q as r,s as e,v as d,u as f,x as S,O as te,F as N,D as se,E as oe,t as j,y as le,P as ne,Q as ie,R as L,J as ae,z as E,N as B}from"./index-eef30e47.js";const F=c=>(se("data-v-edd9fa6b"),c=c(),oe(),c),re={class:"card w-full flex align-items-center gap-2"},ce=F(()=>e("input",{class:"w-full border-none bg-transparent outline-none cursor-pointer",type:"text",placeholder:"Bạn đang nghĩ gì?",readonly:""},null,-1)),de=[ce],pe=F(()=>e("i",{style:{color:"#41b35d","font-size":"1.2rem"},class:"pi pi-image"},null,-1)),ue={class:"flex flex-column gap-3"},_e=F(()=>e("span",{class:"ql-formats"},[e("button",{class:"ql-bold"}),e("button",{class:"ql-italic"}),e("button",{class:"ql-underline"})],-1)),me={class:"relative h-14rem border-dashed border-1 text-main-color flex justify-content-center align-items-center"},fe={key:0,class:"w-full h-full"},ve={key:0,class:"w-full h-full bg-black",controls:""},ge=["src"],be=["src"],he={key:1,class:"text-center"},xe={key:0,class:"flex flex-column align-items-center gap-1"},ye=F(()=>e("span",null,"Đang tải...",-1)),we={key:1,class:"flex flex-column gap-2"},ke=F(()=>e("i",{class:"pi pi-image text-2xl"},null,-1)),Ce=F(()=>e("span",null,"Thêm ảnh/video",-1)),$e=[ke,Ce],Pe={__name:"UploadPosts",emits:["onEmitUpdateListPosts"],setup(c,{emit:C}){const{onGetterUserInfo:v,onActionActivePopupMessage:x}=D(),{onActionCreateNewPosts:g}=D(),{user_info:s}=q(),p=new FormData,t=ee({formUploadPosts:{postsContent:"",postsFile:""},previewFile:"",typeFile:"",loadingFile:!1,display:!1}),$=(n,o,i)=>{t.loadingFile=!0;const l=new FileReader;l.readAsDataURL(n.target.files[0]),l.onload=b=>{t[`${o}`]=b.target.result,t.formUploadPosts[`${i}`]=n.target.files[0],t.typeFile=n.target.files[0].type.split("/")[0],t.previewFile&&(t.loadingFile=!1)}},u=(n,o)=>{t[`${n}`]="",t.formUploadPosts[`${o}`]=""},P=()=>{t.display=!0},_=async n=>{x(null,"Đang tải lên..."),t.display=!1,p.set("user_id",s.user_id),p.set("posts_content",n.postsContent),p.set("posts_file",n.postsFile),p.set("type_file",t.typeFile),await g(p)?(C("onEmitUpdateListPosts"),x(1,"Bài viết của bạn đã được tải lên bảng tin!")):x(0,"Tải lên bài viết thất bại!"),t.formUploadPosts.postsContent="",t.formUploadPosts.postsFile="",t.previewFile="",t.typeFile=""};return(n,o)=>{var I;const i=h("UserItem"),l=h("Editor"),b=h("ProgressSpinner"),y=h("Button"),w=h("Dialog");return a(),r(N,null,[e("div",re,[d(i,{userAvatar:(I=f(v))==null?void 0:I.avatar_user},null,8,["userAvatar"]),e("div",{onClick:o[0]||(o[0]=m=>P()),style:{padding:"0.7rem"},class:"w-full flex align-items-center bg-light-blue border-round-3xl gap-2 cursor-pointer on-click-2"},de),pe]),d(w,{visible:t.display,"onUpdate:visible":o[5]||(o[5]=m=>t.display=m),modal:"",header:"Tạo bài viết",class:"w-30rem"},{footer:S(()=>[d(y,{onClick:o[4]||(o[4]=m=>_(t.formUploadPosts)),class:"w-full mt-3",label:"Đăng",disabled:!t.formUploadPosts.postsContent&&!t.formUploadPosts.postsFile},null,8,["disabled"])]),default:S(()=>{var m,A;return[e("div",ue,[d(i,{userAvatar:(m=f(v))==null?void 0:m.avatar_user,fullName:(A=f(v))==null?void 0:A.full_name,content:f(te)(new Date),icon:"pi pi-globe"},null,8,["userAvatar","fullName","content"]),d(l,{modelValue:t.formUploadPosts.postsContent,"onUpdate:modelValue":o[1]||(o[1]=k=>t.formUploadPosts.postsContent=k),editorStyle:"height: 5rem","aria-describedby":"editor-error"},{toolbar:S(()=>[_e]),_:1},8,["modelValue"]),e("div",me,[t.previewFile?(a(),r("div",fe,[t.typeFile==="video"?(a(),r("video",ve,[e("source",{src:t.previewFile,type:"video/mp4"},null,8,ge)])):(a(),r("img",{key:1,class:"w-full h-full object-fit-cover",src:t.previewFile,alt:""},null,8,be)),e("i",{onClick:o[2]||(o[2]=k=>u("previewFile","postsFile")),class:"pi pi-times text-main-color absolute right-0 top-0 p-2 border-round-lg on-click font-bold"})])):(a(),r("div",he,[t.loadingFile?(a(),r("div",xe,[d(b,{style:{width:"40px",height:"40px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),ye])):(a(),r("div",we,$e)),e("input",{class:"absolute top-0 left-0 right-0 bottom-0 opacity-0 cursor-pointer",type:"file",onChange:o[3]||(o[3]=k=>$(k,"previewFile","postsFile"))},null,32)]))])])]}),_:1},8,["visible"])],64)}}},st=Z(Pe,[["__scopeId","data-v-edd9fa6b"]]),Ue=e("span",{class:"text-700"},"Bình luận",-1),Fe=[Ue],Ie={class:"flex flex-column gap-3 h-20rem"},Ae={class:"flex flex-column line-height-2 bg-black-alpha-10 p-2 border-round-2xl"},Le={class:"font-bold"},Se={class:"flex align-items-center gap-1"},De={class:"text-600"},Ee={key:0,class:"w-full h-full flex justify-content-center align-items-center text-600"},Ne={style:{padding:"1rem"},class:"w-full mt-3 box-shadow-1 flex align-items-center bg-light-blue border-round-3xl gap-2"},je=["onKeydown"],Be={__name:"Comment",props:{commentInfo:{type:Array,required:!1,default:()=>{}},postId:{type:Number,required:!0,default:null}},emits:["onEmitUpdateListPosts"],setup(c,{emit:C}){const v=c,{onActionCommentPosts:x}=D(),{user_info:g}=q(),s=j(v,"commentInfo"),p=j(v,"postId"),t=ee({commentContent:"",display:!1}),$=()=>{t.display=!0},u=async()=>{await x({posts_id:p.value,user_id:g.user_id,comment_content:t.commentContent})&&C("onEmitUpdateListPosts"),t.commentContent=""};return(P,_)=>{const n=h("UserItem"),o=h("Dialog");return a(),r(N,null,[e("div",{onClick:$,class:"unselectable on-click-2 px-3 py-2 border-round-2xl cursor-pointer border-1 text-400"},Fe),d(o,{visible:t.display,"onUpdate:visible":_[1]||(_[1]=i=>t.display=i),modal:"",header:"Đáng giá 1$",class:"w-30rem"},{footer:S(()=>[e("div",Ne,[le(e("input",{"onUpdate:modelValue":_[0]||(_[0]=i=>t.commentContent=i),class:"w-full border-none bg-transparent outline-none",type:"text",placeholder:"Hãy viết bình luận",onKeydown:ne(u,["enter"])},null,40,je),[[ie,t.commentContent]]),e("i",{onClick:u,class:L([{"p-disabled":!t.commentContent},"pi pi-send on-click-3 cursor-pointer"])},null,2)])]),default:S(()=>{var i;return[e("div",Ie,[(a(!0),r(N,null,ae(s.value,(l,b)=>{var y,w;return a(),r("div",{key:b,class:"flex gap-2"},[d(n,{userAvatar:(y=l==null?void 0:l.user_info)==null?void 0:y.avatar_user},null,8,["userAvatar"]),e("label",Ae,[e("span",Le,E((w=l==null?void 0:l.user_info)==null?void 0:w.full_name),1),e("div",Se,[e("span",De,E(l==null?void 0:l.comment_content),1)])])])}),128)),((i=s.value)==null?void 0:i.length)<1?(a(),r("div",Ee," Chưa có bình luận nào. ")):B("",!0)])]}),_:1},8,["visible"])],64)}}};const T=c=>(se("data-v-c45e7ee6"),c=c(),oe(),c),qe={class:"w-full card flex flex-column gap-3"},Te={class:"flex justify-content-between"},Ve=T(()=>e("div",{class:"dot border-circle w-2rem h-2rem flex justify-content-center align-items-center cursor-pointer on-click"},[e("i",{class:"pi pi-ellipsis-h"})],-1)),Re={class:"w-full flex flex-column gap-2 border-bottom-1 pb-3 text-400"},ze=["innerHTML"],Me={key:0,class:"body-card-img w-full h-24rem border-1 bg-black-alpha-90",controls:""},Oe=["src"],He=["src"],Ke={class:"flex justify-content-between px-3"},Ge={class:"flex align-items-center gap-2",for:"Số lượt like"},Je={class:"text-600"},Qe={class:"flex align-items-center gap-2",for:"Số lượt comment"},We={class:"text-600"},Xe=T(()=>e("label",{class:"flex align-items-center gap-2",for:"Số lượt share"},[e("span",{class:"text-600"},"100 chia sẻ")],-1)),Ye={class:"flex align-items-center justify-content-between"},Ze=T(()=>e("div",{class:"unselectable on-click-2 px-3 py-2 border-round-2xl cursor-pointer border-1 text-400"},[e("span",{class:"text-700"},"Chia sẻ")],-1)),et={__name:"Posts",props:["postsContentInfo"],emits:["onEmitUpdateListPosts"],setup(c,{emit:C}){const v=c,{onActionLikePosts:x}=D(),{user_info:g}=q(),s=j(v,"postsContentInfo"),p=async($,u)=>{await x({posts_id:$,user_id:u})&&C("onEmitUpdateListPosts")},t=()=>{C("onEmitUpdateListPosts")};return($,u)=>{var _,n,o,i,l,b,y,w,I,m,A,k,V,R,z,M,O,H,K,G,J,Q,W,X,Y;const P=h("UserItem");return a(),r("div",qe,[e("div",Te,[d(P,{userAvatar:(n=(_=s.value)==null?void 0:_.poster_info)==null?void 0:n.avatar_user,fullName:(i=(o=s.value)==null?void 0:o.poster_info)==null?void 0:i.full_name,content:f(te)((l=s.value)==null?void 0:l.created_date),icon:"pi pi-globe"},null,8,["userAvatar","fullName","content"]),Ve]),e("div",Re,[e("span",{innerHTML:(b=s.value)==null?void 0:b.posts_content,class:L([{"p-3 bg-main-color text-white border-round-2xl":!((y=s.value)!=null&&y.posts_file)},"text-800"])},null,10,ze),((w=s.value)==null?void 0:w.type_file)==="video"&&((I=s.value)!=null&&I.posts_file)?(a(),r("video",Me,[e("source",{src:(m=s.value)==null?void 0:m.posts_file,type:"video/mp4"},null,8,Oe)])):B("",!0),((A=s.value)==null?void 0:A.type_file)==="image"&&((k=s.value)!=null&&k.posts_file)?(a(),r("img",{key:1,class:"body-card-img w-full h-24rem object-fit-cover",src:(V=s.value)==null?void 0:V.posts_file,alt:""},null,8,He)):B("",!0),e("div",Ke,[e("label",Ge,[e("span",Je,"Đáng giá "+E((z=(R=s.value)==null?void 0:R.list_like)==null?void 0:z.length)+"$",1)]),e("label",Qe,[e("span",We,E((O=(M=s.value)==null?void 0:M.list_comment)==null?void 0:O.length)+" bình luận",1)]),Xe])]),e("div",Ye,[e("div",{onClick:u[0]||(u[0]=U=>p(s.value.posts_id,f(g).user_id)),class:L([{"bg-main-color":(K=(H=s.value)==null?void 0:H.list_like)==null?void 0:K.filter(({user_id:U})=>U===f(g).user_id)[0]},"unselectable flex align-items-center gap-1 on-click-2 px-3 py-2 border-round-2xl cursor-pointer border-1 text-400"])},[e("span",{class:L([{"text-white":(J=(G=s.value)==null?void 0:G.list_like)==null?void 0:J.filter(({user_id:U})=>U===f(g).user_id)[0]},"text-700"])},"Tặng",2),e("i",{class:L([{"text-white":(W=(Q=s.value)==null?void 0:Q.list_like)==null?void 0:W.filter(({user_id:U})=>U===f(g).user_id)[0]},"pi pi-dollar text-700"]),style:{"font-size":"0.8rem"}},null,2)],2),d(Be,{commentInfo:(X=s.value)==null?void 0:X.list_comment,postId:+((Y=s.value)==null?void 0:Y.posts_id),onOnEmitUpdateListPosts:t},null,8,["commentInfo","postId"]),Ze])])}}},ot=Z(et,[["__scopeId","data-v-c45e7ee6"]]);export{ot as P,st as U};
